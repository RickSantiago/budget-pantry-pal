rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // Regra de seguranÃ§a aberta para desenvolvimento
    // Permite que qualquer pessoa leia e escreva em todo o banco de dados.
    match /{document=**} {
      allow read, write: if true;
    }
    
     function isValidItem(item) {
      // Required fields validation
      return 'name' in item && item.name is string && item.name.size() > 0 &&
             'quantity' in item && item.quantity is number && item.quantity > 0 &&
             'unit' in item && item.unit is string &&
             'checked' in item && item.checked is bool &&
             // Optional fields validation
             (!('price' in item) || item.price is number) &&
             (!('category' in item) || item.category is string) &&
             (!('supermarket' in item) || item.supermarket is string) &&
             (!('expiryDate' in item) || item.expiryDate is string) &&
             (!('isRecurring' in item) || item.isRecurring is bool) &&
             (!('deletedAt' in item) || item.deletedAt is string) &&
             // Ensure no other fields are present
             item.keys().hasOnly([
               'name', 'quantity', 'unit', 'checked', 
               'price', 'category', 'supermarket', 'expiryDate', 'isRecurring', 'isOptional', 'deletedAt'
             ]);
    }
    
    
  }
}